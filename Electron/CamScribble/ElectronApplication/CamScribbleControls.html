<!DOCTYPE html>
<html>
<head>
  <title>Controls</title>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/bootstrap-slider.min.css" />
  <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" />

  <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
  <script type="text/javascript" src="js/jquery.min.js"></script>
  <script type="text/javascript" src="js/bootstrap-slider.min.js"></script>
  <script>if (window.module) module = window.module;</script>

  <style>

  .title {
    border-radius: 5px 5px 0 0;
    background-color: #cecece;
    text-align: center;
  }


  .control-buttons {
    width: 100px;
    margin: 2px 2px 2px 2px;
  }


  </style>
</head>
<body>

  <div class="container-fluid">
    <div class="row title">
      <h3>Controls</h3>
    </div>
    <hr />
    <div class="row">
        <div class="container">
          <div class="col-xs-12">
            <div class="row">
              <label>Noise Supression: </label><br />
              <input
                class="bs-slider"
                id="noise"
                data-slider-id='bss-noise'
                type="number"
                data-slider-min="0"
                data-slider-max="10"
                data-slider-step="1"
                data-slider-value="2"/>
            </div>

            <div class="row">
              <label>Stroke: </label><br />
              <input
                class="bs-slider"
                id="stroke"
                data-slider-id='bss-stroke'
                type="number"
                data-slider-min="0"
                data-slider-max="30"
                data-slider-step="1"
                data-slider-value="2"/>
            </div>

            <div class="row">
              <label>Brightness: </label><br />
              <input
                class="bs-slider"
                id="brightness"
                data-slider-id='bss-brightness'
                type="number"
                data-slider-min="0"
                data-slider-max="100"
                data-slider-step="1"
                data-slider-value="100"/>
            </div>

            <div class="row">
              <label>Width: </label><br />
              <input
                class="bs-slider"
                id="width"
                data-slider-id='bss-width'
                type="number"
                data-slider-min="0"
                data-slider-max="100"
                data-slider-step="1"
                data-slider-value="50"/>
            </div>

            <div class="row">
              <label>Height: </label><br />
              <input
                class="bs-slider"
                id="height"
                data-slider-id='bss-height'
                type="number"
                data-slider-min="0"
                data-slider-max="100"
                data-slider-step="1"
                data-slider-value="50"/>
            </div>
            <div class="row">
              <label>Ink Color: </label><br />
              <input
                type="color"
                value="#FFFFFF"/>
            </div><hr />


            <!-- Buttons -->
            <div class="row">
              <div class="col-xs-6">
                <a id='cs-undo' class="btn btn-primary control-buttons">
                  <i class="fa fa-undo"></i>&nbsp;Undo</a>
              </div>
              <div class="col-xs-6">
                <a id='cs-redo' class="btn btn-primary control-buttons">
                  <i class="fa fa-repeat"></i>&nbsp;Redo</a>
              </div>
            </div>


            <div class="row">
              <div class="col-xs-6">
                <a id='cs-erase' class="btn btn-primary control-buttons">
                  <i class="fa fa-eraser"></i>&nbsp;Erase</a>
              </div>
              <div class="col-xs-6">
                <a id='cs-clear' class="btn btn-primary control-buttons">
                  <i class="fa fa-trash-o"></i>&nbsp;Clear</a>
              </div>
            </div>


            <div class="row">
              <div class="col-xs-6">
                <a id='cs-export' class="btn btn-primary control-buttons">
                  <i class="fa fa-save"></i>&nbsp;Export</a>
              </div>
              <div class="col-xs-6">
                <!-- <a class="btn btn-primary control-buttons">
                  <i class="fa fa-trash-o"></i>&nbsp;Clear</a> -->
              </div>
            </div>



          </div>
        </div>
    </div>

  </div>


</body>

<script>
const {ipcRenderer} = require('electron');
function setupTrackBars() {
  var sliderIds = //['#noise','#stroke','#brightness','#width','#height'];
  [
    {
      id: '#noise',
      formatter: function(value) {
        ipcRenderer.send('cs-controls',{action:'noise',val: value});
        return value+'x';
      }
    },
    {
      id: '#stroke',
      formatter: function(value) {
        ipcRenderer.send('cs-controls',{action:'stroke',val: value});
        return value+'pts';
      }
    },
    {
      id: '#brightness',
      formatter: function(value) {
        ipcRenderer.send('cs-controls',{action:'brightness',val: value/100.0});
        return value+'%';
      }
    },
    {
      id: '#width',
      formatter: function(value) {
        ipcRenderer.send('cs-controls',{action:'width',val: value/100.0});
        return value+'%';
      }
    },
    {
      id: '#height',
      formatter: function(value) {
        ipcRenderer.send('cs-controls',{action:'height',val: value/100.0});
        return value+'%';
      }
    }
  ];

  for(var i=0;i<sliderIds.length;i++) {
    // With JQuery
    $(sliderIds[i].id).slider({
    	formatter: sliderIds[i].formatter
    });
  }
}

function setupButtons() {


  var buttons = [
    {
      id: '#cs-undo',
      onClick: function() {
        ipcRenderer.send('cs-controls',{action:'undo'});
      }
    },
    {
      id: '#cs-redo',
      onClick: function() {
        ipcRenderer.send('cs-controls',{action:'redo'});
      }
    },
    {
      id: '#cs-erase',
      onClick: function() {
        ipcRenderer.send('cs-controls',{action:'erase'});
      }
    },
    {
      id: '#cs-clear',
      onClick: function() {
        ipcRenderer.send('cs-controls',{action:'clear'});
      }
    },
    {
      id: '#cs-export',
      onClick: function() {
        ipcRenderer.send('cs-controls',{action:'export'});
      }
    }
  ];

  for(var i=0;i<buttons.length;i++) {
    $(buttons[i].id).on('click',buttons[i].onClick);
  }
}

$(document).ready(function(){
  setupTrackBars();
  setupButtons();
});


</script>
</html>
